# **Redis 基础数据结构**

## **1. 概述**
- Redis 是速度非常快的非关系型（NoSQL）内存键值数据库，可以存储键和五种不同类型的值之间的映射。

- **键的类型只能为```字符串```**，值支持五种数据类型：字符串、列表、集合、散列表、有序集合。

- Redis 支持很多特性，**例如将内存中的数据持久化到硬盘中，使用复制来扩展读性能，使用分片来扩展写性能**。

<br>

## **2. 数据类型**
| 数据类型 | 可以存储的值 |	操作 |
|:--------|:--------|:--------|
| **STRING** | **字符串、整数或者浮点数** |	对整个字符串或者字符串的其中一部分执行操作</br> 对整数和浮点数执行自增或者自减操作 |
| **LIST** | **列表** |	从两端压入或者弹出元素 </br> 对单个或者多个元素进行修剪，</br> 只保留一个范围内的元素 |
| **SET** | **无序集合** | 添加、获取、移除单个元素</br> 检查一个元素是否存在于集合中</br> 计算交集、并集、差集</br> 从集合里面随机获取元素 |
| **HASH** | **包含键值对的无序散列表** | 添加、获取、移除单个键值对</br> 获取所有键值对</br> 检查某个键是否存在 |
| **ZSET** | **有序集合** |	添加、获取、删除元素</br> 根据分值范围或者成员来获取元素</br> 计算一个键的排名 |

<br>

## **3. 容器型数据结构的通用规则**
- **list/set/hash/zset** 这四种数据结构是**容器型**数据结构，它们共享下面两条通用规则:<br>
    1. **create if not exists**：如果容器不存在，那就**创建一个**，再进行操作。比如 rpush 操作刚开始是没有列表的，Redis 就会自动创建一个，然后再 rpush 进去新元素。

    2. **drop if no elements**：如果容器里元素没有了，那么立即**删除元素**，释放内存。这意味着 lpop 操作到最后一个元素，**列表就消失了**。

<br>

## **4. 过期时间**
- Redis 所有的数据结构都可以设置**过期时间**，时间到了，Redis 会自动删除相应的对象。 需要注意的是过期**是以对象为单位**，比如一个 hash 结构的过期是**整个 hash 对象的过期**，而不是其中的**某个子 key**。

- **还有一个需要特别注意的地方是如果一个```字符串```已经设置了过期时间，然后你调用了 ```set``` 方法修改了它，它的```过期时间会消失```**。

    ```bash
    127.0.0.1:6379> set codehole yoyo 
    OK
    127.0.0.1:6379> expire codehole 600 
    (integer) 1
    127.0.0.1:6379> ttl codehole 
    (integer) 597
    127.0.0.1:6379> set codehole yoyo 
    OK
    127.0.0.1:6379> ttl codehole 
    (integer) -1
    ```