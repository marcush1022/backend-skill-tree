# **HTTP和HTTPS有什么区别**

1. **端口不同**：**HTTP 使用的是 ```80``` 端口，HTTPS 使用 ```443``` 端口**；

2. **Http 协议运行在 ```TCP``` 之上，```明文传输```，客户端与服务器端都无法验证对方的身份**；**Https 是身披 ```SSL（Secure Socket Layer）```外壳的 Http，运行于 ```SSL``` 上，```SSL``` 运行于 ```TCP``` 之上，是添加了```加密和认证机制```的 HTTP**。

3. **资源消耗**：HTTPS 由于**加密解密会带来更大的 CPU 和内存开销**；

4. **开销**：**HTTPS 通信需要```证书```**，一般需要向证书颁发机构（CA）购买

- Https 的加密机制**是一种```共享密钥加密```和```公开密钥加密```并用的混合加密机制**。

-----

## **1. Https的连接过程？**
1. 客户端向服务器发送请求，同时发送客户端支持的一套**加密规则**（包括**对称加密、非对称加密、摘要算法**）；

2. 服务器从中选出一组**加密算法与 HASH 算法**，并**将自己的身份信息以```证书```的形式发回给浏览器**。证书里面包含了**网站地址，加密公钥（用于非对称加密），以及证书的颁发机构**等信息（证书中的私钥只能用于服务器端进行解密）；

3. 客户端**验证服务器的合法性**，包括：**证书是否过期，CA 是否可靠，发行者证书的公钥能否正确解开服务器证书的“发行者的数字签名”，服务器证书上的域名是否和服务器的实际域名相匹配**；

4. 如果证书受信任，或者用户接收了不受信任的证书，**浏览器会生成一个随机密钥（用于对称算法）**，并**用服务器提供的公钥加密（采用非对称算法对密钥加密）**；**使用 Hash 算法对握手消息进行摘要计算**，并**对摘要使用之前产生的密钥加密（对称算法）**；将**加密后的随机密钥和摘要**一起发送给服务器；

5. 服务器**使用自己的私钥解密**，得到**对称加密的密钥**，用这个密钥解密出 **Hash 摘要值**，并验证**握手消息**是否一致；如果一致，服务器使用**对称加密的密钥加密握手消息**发给浏览器；

6. 浏览器**解密并验证摘要**，若一致，则**握手结束**。之后的数据传送都使用**对称加密的密钥**进行加密

<br>

### **总结**
- **```非对称加密算法```用于在```握手过程```中加密```生成的密码```**；

- **```对称加密算法```用于对```真正传输的数据```进行加密**；

- **```HASH``` 算法用于验证```数据的完整性```**。

-----

## **2. 什么是对称加密、非对称加密？区别是什么？**
- **对称密钥加密是指加密和解密```使用同一个密钥```的方式**，如：```DES、RC2、RC4```。这种方式存在的最大问题就是**密钥发送问题，即如何安全地将密钥发给对方**；

- 而非对称加密是指**使用一对非对称密钥，即公钥和私钥**，公钥可以随意发布，但私钥只有自己知道。**发送密文的一方使用```对方的公钥```进行加密处理，对方接收到加密信息后，使用自己的私钥进行解密**。

- 由于非对称加密的方式**不需要发送用来解密的私钥**，所以可以保证安全性；但是和对称加密比起来，它非常的慢，**所以我们还是要用```对称加密来传送消息```，但```对称加密所使用的密钥```我们可以通过```非对称加密的方式```发送出去**。

- **非对称加密**：需要两个密钥：公钥和私钥。**如果用```公钥加密```，需要用```私钥```才能解密**。如：RSA

- **区别**：对称加密速度更快，**通常用于大量数据的加密**；非对称加密**安全性更高**（不需要传送私钥）

-----

## **3. 数字签名、报文摘要的原理**
- **发送者A用```私钥进行签名```，接收者B用```公钥验证签名```**。因为**除A外没有人有私钥**，所以B相信签名是来自A。**A不可抵赖，B也不能伪造报文**。

- 摘要算法：MD5、SHA

-----

> 参考：
> - https://github.com/wolverinn/Waking-Up/blob/master/Computer%20Network.md#HTTP%E5%92%8CHTTPS%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB